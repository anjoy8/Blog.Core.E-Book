(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{212:function(e,n,r){"use strict";r.r(n);var t=r(6),o=Object(t.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"h-核心功能一览表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#h-核心功能一览表"}},[e._v("#")]),e._v(" H  核心功能一览表")]),e._v(" "),n("h2",{attrs:{id:"一、表结构解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、表结构解析"}},[e._v("#")]),e._v(" 一、表结构解析")]),e._v(" "),n("p",[n("code",[e._v("Blog.Core")]),e._v(" 项目共包含四部分的数据库表结构，分别是：用户角色管理部分、接口菜单权限管理部分、博客文章管理部分、以及其他不重要部分。")]),e._v(" "),n("blockquote",[n("p",[e._v("注意：目前不提供与维护数据库数据，直接通过 "),n("code",[e._v("SeedData")]),e._v(" 生成种子数据；")])]),e._v(" "),n("h3",{attrs:{id:"_1、用户角色管理部分-必须"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、用户角色管理部分-必须"}},[e._v("#")]),e._v(" 1、用户角色管理部分[必须]")]),e._v(" "),n("p",[e._v("主要是三个表：分别对应用户表(sysUserInfo)、角色表(Role)、用户角色关系表(UserRole)。")]),e._v(" "),n("img",{attrs:{src:"http://img.neters.club/doc/usermanager.png",alt:"usermanager"}}),e._v(" "),n("h3",{attrs:{id:"_2、接口菜单权限管理部分-必须"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、接口菜单权限管理部分-必须"}},[e._v("#")]),e._v(" 2、接口菜单权限管理部分[必须]")]),e._v(" "),n("p",[e._v("主要是四个表：分别对应接口表(Module)、菜单表(Permission)、接口菜单关系表(ModulePermission)暂时没用到、角色接口菜单关系表(RoleModulePermission)。")]),e._v(" "),n("img",{attrs:{src:"http://img.neters.club/doc/permissionmanager.png",alt:"permissionmanager"}}),e._v(" "),n("h3",{attrs:{id:"_3、博客文章管理部分-可选"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、博客文章管理部分-可选"}},[e._v("#")]),e._v(" 3、博客文章管理部分[可选]")]),e._v(" "),n("p",[e._v("主要是三个表：分别对应博客表(BlogArticle)、Bug专题表(Topic)、Bug内容表(TopicDetail)。")]),e._v(" "),n("img",{attrs:{src:"http://img.neters.club/doc/blogmanager.png",alt:"blogmanager"}}),e._v(" "),n("h3",{attrs:{id:"_4、其他不重要部分"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、其他不重要部分"}},[e._v("#")]),e._v(" 4、其他不重要部分")]),e._v(" "),n("p",[e._v("主要是三个表：分别对应Job调度表(TasksQz)、密码库表(PasswordLib)、操作日志表(OperateLog)、广告表(Advertisement)、公告表(Guestbook)。")]),e._v(" "),n("img",{attrs:{src:"http://img.neters.club/doc/othersmanager.png",alt:"othersmanager"}}),e._v(" "),n("h2",{attrs:{id:"二、日志记录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、日志记录"}},[e._v("#")]),e._v(" 二、日志记录")]),e._v(" "),n("p",[e._v("本框架涵盖了不同领域的日志记录，共五个，分别是：")]),e._v(" "),n("p",[e._v("1、全局异常日志")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("开启方式：无需操作。  \n文件路径：web目录下，Log/GlobalExcepLogs_{日期}.log。  \n功能描述：记录项目启动后出现的所有异常日志，不包括中间件中异常。  \n")])])]),n("p",[e._v("2、IP 请求日志")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('开启方式：无需操作。  \n文件路径：web目录下，Log/RequestIpInfoLog.log。  \n功能描述：记录项目启动后客户端请求的ip和接口信息。   \n举例来说：  \n{"Ip":"xxx.xx.xx.x","Url":"/api/values","Datetime":"2020-01-06 18:02:19","Date":"2020-01-06","Week":"周一"}\n')])])]),n("p",[e._v("3、用户API访问日志")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("开启方式：appsettings.json -> Middlewar -> RecordAccessLogs 节点为true。  \n文件路径：web目录下，Log/RecordAccessLogs_{日期}.log。  \n功能描述：记录项目启动后客户端所有的API访问日志，包括参数、body以及用户信息。  \n")])])]),n("p",[e._v("4、服务层请求响应AOP日志")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("开启方式：appsettings.json -> AppSettings -> LogAOP 节点为true。  \n文件路径：web目录下，Log/AOPLog.log。  \n功能描述：记录项目启动请求api后，所有的service层日志，包括方法名、参数、响应结果或用户（非必须）。 \n")])])]),n("p",[e._v("5、数据库操作日志")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("开启方式：appsettings.json -> AppSettings -> SqlAOP 节点为true。  \n文件路径：web目录下，Log/SqlLog.log。  \n功能描述：记录项目启动请求api并访问service后，所有的db操作日志，包括Sql参数与Sql语句。\n举例来说：  \n--------------------------------\n1/6/2020 6:13:04 PM|\n【SQL参数】：@bID0:1\n【SQL语句】：SELECT `bID`,`bsubmitter`,`btitle`,`bcategory`,`bcontent`,`btraffic`,`bcommentNum`,`bUpdateTime`,`bCreateTime`,`bRemark`,`IsDeleted` FROM `BlogArticle`  WHERE ( `bID` = @bID0 ) \n")])])]),n("h2",{attrs:{id:"三、控制台信息展示"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、控制台信息展示"}},[e._v("#")]),e._v(" 三、控制台信息展示")]),e._v(" "),n("img",{attrs:{src:"https://img.neters.club/doc/2020-05-09_182758.png",alt:"配置",width:"800"}}),e._v(" "),n("h2",{attrs:{id:"四、nginx一览表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、nginx一览表"}},[e._v("#")]),e._v(" 四、Nginx一览表")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('#user  nobody;\nworker_processes 1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\nevents {\n  worker_connections 1024;\n}\n\nhttp {\n  include mime.types;\n  default_type application/octet-stream;\n  server_names_hash_bucket_size 64;\n\n  #log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n  #                  \'$status $body_bytes_sent "$http_referer" \'\n  #                  \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n  #access_log  logs/access.log  main;\n  sendfile on;\n  #tcp_nopush     on;\n\n  #keepalive_timeout  0;\n  keepalive_timeout 600;\n  proxy_read_timeout 600;\n  proxy_send_timeout 600;\n\n  proxy_buffer_size 128k;\n  proxy_buffers 32 32k;\n  proxy_busy_buffers_size 128k;\n\n  #gzip  on;\n \n  ######################################################################\n  server {\n    listen 80;\n    server_name www.neters.club;\n\n    #charset koi8-r;\n\n    #access_log  logs/host.access.log  main;\n    location / {\n      root C:\\code\\Code\\Neters\\home;\n      index index.html index.htm;\n    }\n  }\n\n  server {\n    listen 80;\n    server_name neters.club;\n\n    #charset koi8-r;\n\n    #access_log  logs/host.access.log  main;\n    location / {\n      root C:\\code\\Code\\Neters\\home;\n\n      index index.html index.htm;\n    }\n  }\n\n  server {\n    listen 80;\n    server_name ids.neters.club;\n    rewrite ^(.*)$ https://$host$1 permanent;#把http的域名请求转成https，第二种写法在此节的末端\n\n    #charset koi8-r;\n\n    #access_log  logs/host.access.log  main;\n    location / {\n      #proxy_pass http://localhost:5004;\n      root html;\n      index index.html index.htm;\n    }\n  }\n\n  server {\n    listen 443 ssl;\n    server_name ids.neters.club; #网站域名，和80端口保持一致\n    ssl on;\n    ssl_certificate 1_ids.neters.club_bundle.crt; #证书公钥\n    ssl_certificate_key 2_ids.neters.club.key; #证书私钥\n    ssl_session_cache shared:SSL:1m;\n    ssl_session_timeout 5m;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers ECDH:AESGCM:HIGH:!RC4:!DH:!MD5:!3DES:!aNULL:!eNULL;\n    ssl_prefer_server_ciphers on;\n\n    error_page 497 https://$host$uri?$args;\n\n    location / {\n      proxy_pass http://localhost:5004;\n      proxy_redirect off;\n      proxy_set_header Host $http_host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n      proxy_set_header Cookie $http_cookie;\n      #proxy_cookie_path\n      chunked_transfer_encoding off;\n    }\n  }\n\n  server {\n    listen 80;\n    server_name apk.neters.club;\n\n    #charset koi8-r;\n\n    #access_log  logs/host.access.log  main;\n    location / {\n      root html;\n      proxy_pass http://localhost:9291;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection keep-alive;\n      proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_cache_bypass $http_upgrade;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n      index index.html index.htm;\n    }\n\n    location /.doc/ {\n      proxy_pass http://docs.neters.club/;\n    }\n  }\n\n  server {\n    listen 80;\n    server_name docs.neters.club;\n\n    location / {\n      root C:\\code\\Code\\Blog.Core\\.docs\\contents\\.vuepress\\dist;\n      index index.html index.htm;\n    }\n  }\n\n  server {\n    listen 80;\n    server_name vueadmin.neters.club;\n\n    location / {\n      try_files $uri $uri/ /index.html;\n      root C:\\code\\Code\\Blog.Admin\\distis;\n      #proxy_pass   http://localhost:2364;\n      index index.html index.htm;\n    }\n\n    location /api/ {\n      rewrite ^.+apb/?(.*)$ /$1 break;\n      include uwsgi_params;\n      proxy_pass http://localhost:9291;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      #proxy_set_header Connection "upgrade";\n      #proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    location /api2/ {\n      rewrite ^.+apb/?(.*)$ /$1 break;\n      include uwsgi_params;\n      proxy_pass http://localhost:9291;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection "upgrade";\n      proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    location /images/ {\n      include uwsgi_params;\n      proxy_pass http://localhost:9291;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      #proxy_set_header Connection "upgrade";\n      #proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n    location /.doc/ {\n      proxy_pass http://docsadmin.neters.club/;\n    }\n\n    error_page 404 /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n      root html;\n    }\n  }\n\n  server {\n    listen 80;\n    server_name docsadmin.neters.club;\n\n    location / {\n      root C:\\code\\Code\\Blog.Admin\\.doc\\contents\\.vuepress\\dist;\n      index index.html index.htm;\n    }\n  }\n\n\n  server {\n    listen 80;\n    server_name ddd.neters.club;\n    location / {\n      proxy_pass http://localhost:4773;\n      index index.php index.html index.htm;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection keep-alive;\n      proxy_set_header Host $host;\n      proxy_cache_bypass $http_upgrade;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header X-Forwarded-Proto $scheme;\n\n    }\n  }\n\n\n  server {\n    listen 80;\n    server_name ask.neters.club;\n\n    #charset koi8-r;\n\n    #access_log  logs/host.access.log  main;\n    location / {\n      root html;\n      proxy_pass http://localhost:5020;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      #proxy_set_header Connection "upgrade";\n      #proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      index index.html index.htm;\n    }\n  }\n\n\n  server {\n    listen 80;\n    server_name vueblog.neters.club;\n\n    location / {\n      try_files $uri $uri/ /index.html;\n      root C:\\code\\Code\\Blog.Vue\\dist;\n      index index.html index.htm;\n    }\n\n\n    location /api {\n      rewrite ^.+apb/?(.*)$ /$1 break;\n      include uwsgi_params;\n      proxy_pass http://localhost:9291;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n\n    location /images {\n      include uwsgi_params;\n      proxy_pass http://localhost:9291;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    error_page 404 /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n      root html;\n    }\n  }\n\n  upstream nodenuxt {\n    server 127.0.0.1:3089; # nuxt 项目监听PC端端口\n    keepalive 64;\n  }\n  server {\n    listen 80;\n    server_name tibug.neters.club;\n\n    location / {\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection "upgrade";\n      proxy_set_header Host $host;\n      proxy_set_header X-Nginx-Proxy true;\n      proxy_cache_bypass $http_upgrade;\n      proxy_pass http://nodenuxt;\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n      root html;\n    }\n  }\n\n  server {\n    listen 80;\n    server_name jwt.neters.club;\n\n    location / {\n      root C:\\code\\Code\\jwttoken;\n      index index.html index.htm;\n    }\n\n    error_page 404 /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n      root html;\n    }\n  }\n}\n\n')])])]),n("blockquote",[n("p",[e._v("这里说明下，我的 "),n("code",[e._v("Nginx")]),e._v(" 文件中，"),n("code",[e._v("Ids4")]),e._v(" 项目强制使用 "),n("code",[e._v("Https")]),e._v(" ，采用的是直接跳转，这也是一个办法，当然还有第二种办法(感谢 "),n("code",[e._v("tibos")]),e._v(")：")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("server {\n  listen 80;\n  server_name admin.wmowm.com;\n  location / {\n    proxy_pass http://localhost:9002;\n    index index.php index.html index.htm;\n       proxy_set_header   Upgrade $http_upgrade;\n       proxy_set_header   Connection keep-alive;\n       proxy_set_header   Host $host;\n       proxy_cache_bypass $http_upgrade;\n       proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;\n       proxy_set_header   X-Forwarded-Proto $scheme;\n\n  }\n}\n\nserver {\n  listen 443 ssl;#监听443端口（https默认端口）\n  server_name admin.wmowm.com; #填写绑定证书的域名\n  ssl_certificate /etc/nginx/conf.d/key/admin.wm.crt;#填写你的证书所在的位置\n  ssl_certificate_key /etc/nginx/conf.d/key/admin.wm.key;#填写你的key所在的位置\n  ssl_session_timeout 5m;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置\n  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置\n  ssl_prefer_server_ciphers on;\n  location / {\n    proxy_pass http://localhost:9002;\n    index index.php index.html index.htm;\n    proxy_set_header   Upgrade $http_upgrade;\n       proxy_set_header   Connection keep-alive;\n       proxy_set_header   Host $host;\n       proxy_cache_bypass $http_upgrade;\n       proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;\n       proxy_set_header   X-Forwarded-Proto $scheme;\n  }\n\n}\n")])])])])}),[],!1,null,null,null);n.default=o.exports}}]);